<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Survey Page</title>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery.js"></script>

  <!-- Font Awesome Glyphicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Latest compiled and minified Bootstrap CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


</head>
<body>

  <!-- Basic Questionaire Form -->
  <div class="container">

    <h2 class="text-left">Survey Questions</h2>

    <hr>

    <h3 class="text-left"><b>About You</b></h3>


    <div class="form-group">
      <input type="text" class="form-control" id="name" placeholder="Name (Required)">
      <br>
      <input type="text" class="form-control" id="photo-link" placeholder="Link to photo (Required)">
    </div>

    <hr>

    <!-- Questions Section -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Question 1</h3>
      </div>
      <div class="panel-body">Your mind is always buzzing with unexplored ideas and plans. &nbsp;
        <select placeholder="" class="chosen-select pull-right" id="q1">
          <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>
    </div>



    <hr>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Question 2</h3>
      </div>
      <div class="panel-body">Generally speaking, you rely more on your experience than your imagination. &nbsp;
        <select placeholder="" class="chosen-select pull-right" id="q2">
          <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>
    </div>



    <hr>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Question 3</h3>
      </div>
      <div class="panel-body">You find it easy to stay relaxed and focused even when there is some pressure. &nbsp;
        <select placeholder="" class="chosen-select pull-right" id="q3">
          <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>
    </div>



    <hr>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Question 4</h3>
      </div>
      <div class="panel-body">You rarely do something just out of sheer curiosity. &nbsp;
        <select placeholder="" class="chosen-select pull-right" id="q4">
          <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>
    </div>



    <hr>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Question 5</h3>
      </div>
      <div class="panel-body">People rarely upset you. &nbsp;
        <select placeholder="" class="chosen-select pull-right" id="q5">
          <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>
    </div>



    <hr>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Question 6</h3>
      </div>
      <div class="panel-body">It is often difficult for you to relate to other people’s feelings. &nbsp;
        <select placeholder="" class="chosen-select pull-right" id="q6">
          <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>
    </div>



    <hr>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Question 7</h3>
      </div>
      <div class="panel-body">In a discussion, truth should be more important than people’s sensitivities. &nbsp;
        <select placeholder="" class="chosen-select pull-right" id="q7">
          <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>
    </div>



    <hr>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Question 8</h3>
      </div>
      <div class="panel-body">You rarely get carried away by fantasies and ideas. &nbsp;
        <select placeholder="" class="chosen-select pull-right" id="q8">
          <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>
    </div>



    <hr>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Question 9</h3>
      </div>
      <div class="panel-body">You think that everyone’s views should be respected regardless of whether they are supported by facts or not. &nbsp;
        <select placeholder="" class="chosen-select pull-right" id="q9">
          <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>
    </div>



    <hr>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Question 10</h3>
      </div>
      <div class="panel-body">You feel more energetic after spending time with a group of people. &nbsp;
        <select placeholder="" class="chosen-select pull-right" id="q10">
          <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
        </select>
      </div>
    </div>




    <!-- Trigger the modal pop-up with submit button, via data-target label. -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal" id="submit">Submit</button>

    <hr>

    <!-- Page footer containing links to the Friends List and Github -->
    <footer class="footer">
      <div class="container">
        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/dpkillian/friendfinder">GitHub Repo</a></p>
      </div>
    </footer>

  </div>



  <!-- Modal Class definition-->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
  
      <!-- Modal content (-->
      <div class="modal-content">
        <h3>Closest Friend Match</h3>
        <div class="divider"></div>
        <h4 class="modal-name"></h4>
        <img id="modal-image" width="300" src="">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>

    </div>

  </div>

  









<!-- Javascript Code Section -->
<script type="text/javascript">



// In this code below we create the Front-end JavaScript which "POSTS" our form data
// to the express server via jQuery post.  When the user hits submit, jQuery grabs all
// of the fields then sends a post request to our API.  The API recognizes the route (/api/friends)
// and then runs the associated code (found in apiRoutes.js -- app.post).
// Below jQuery code is waiting for the submit button to be click, and then the following code
// which makes the API call is run.

    $("#submit").on("click", function(event) {
      event.preventDefault();


      // Define a new objecg called newFriend which uses the jQuery handles to grab 
      // the form data from the survey and insert it into the object.
      var newFriend = {
        name: $("#name").val(),
        photo: $("#photo-link").val(),
        scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
      };

      console.log(newFriend);

      // Grab the URL of the website; for use with Heroku so that the absolute path
      // for routing can be determined.
      var currentURL = window.location.origin;
      console.log(currentURL);

      // AJAX post the data to the friends API.  When the post is complete .done (callback)
      // runs to create a pop-up window to display the best match
          $.post(currentURL + "/api/friends", newFriend) 
        .done(function(data) {
          console.log('response = ' + JSON.stringify(data));
          $(".modal-name").html(data.bestMatchName);
          $("#modal-image").attr("src", data.bestMatchImage);
          // alert("Best Match: " + data.bestMatchName + "\n" + "Image: " + data.bestMatchImage);

        });

    });

</script>


</body>
</html>
